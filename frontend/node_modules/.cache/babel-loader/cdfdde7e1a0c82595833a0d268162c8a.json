{"ast":null,"code":"var _jsxFileName = \"F:\\\\pushPullLab2\\\\WhatsAppWeb\\\\frontend\\\\src\\\\WS.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useRef } from 'react';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst serverUrl = 'http://localhost:5000';\nconst socket = io.connect(serverUrl);\n\nconst WS = () => {\n  _s();\n\n  const inputRef = useRef();\n  const messagesRef = useRef();\n  const [messages, setMessages] = useState([]);\n  const [clients, setClients] = useState([]);\n  const [clientId, setClientId] = useState('');\n  const [flag, setflag] = useState(false);\n\n  const submitHandler = e => {\n    e.preventDefault();\n\n    if (clientId) {\n      socket.emit('chat specific client', clientId, socket.id, inputRef.current.value);\n      inputRef.current.value = '';\n    }\n  };\n\n  useEffect(() => {\n    socket.on('bring clients list', clientIds => {\n      const clietsWithoutMe = clientIds.filter(client => client !== socket.id);\n      setClients(clietsWithoutMe);\n    });\n    socket.on('connect specific client', socketId => {\n      setClientId(socketId);\n      setflag(true);\n    });\n    socket.on('chat specific client message', function (msg) {\n      setMessages(prev => [...prev, msg]);\n    });\n    socket.on('group chat message', function (msg) {\n      setMessages(prev => [...prev, msg]);\n    });\n    socket.on('group chat clients', function (msg) {\n      setClients(prev => [...prev, msg]);\n    });\n  }, []);\n\n  const handleClickClient = clientId => {\n    setClientId(clientId);\n    socket.emit('connect specific client', clientId, socket.id);\n    setflag(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"WhatsApp Web\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), flag ? /*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          color: 'blue'\n        },\n        children: [\"User Selected \", clientId]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          color: 'red'\n        },\n        children: \"Select User\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"List of Users\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        ref: messagesRef,\n        id: \"messages\",\n        children: clients.map(client => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleClickClient(client),\n            children: client\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 15\n          }, this)\n        }, Math.ceil(Math.random() * 10000), false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n        ref: messagesRef,\n        id: \"messages\",\n        children: messages.map(message => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: message\n        }, Math.ceil(Math.random() * 10000), false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        id: \"form\",\n        onSubmit: submitHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Enter your message\",\n          id: \"input\",\n          ref: inputRef,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n\n_s(WS, \"C/tI8nK4zcSpjng/N8EO1FQyhLg=\");\n\n_c = WS;\nexport default WS;\n\nvar _c;\n\n$RefreshReg$(_c, \"WS\");","map":{"version":3,"names":["React","useEffect","useState","useRef","io","serverUrl","socket","connect","WS","inputRef","messagesRef","messages","setMessages","clients","setClients","clientId","setClientId","flag","setflag","submitHandler","e","preventDefault","emit","id","current","value","on","clientIds","clietsWithoutMe","filter","client","socketId","msg","prev","handleClickClient","color","map","Math","ceil","random","message"],"sources":["F:/pushPullLab2/WhatsAppWeb/frontend/src/WS.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport io from 'socket.io-client';\n\nconst serverUrl = 'http://localhost:5000';\nconst socket = io.connect(serverUrl);\n\nconst WS = () => {\n  const inputRef = useRef();\n  const messagesRef = useRef();\n  const [messages, setMessages] = useState([]);\n  const [clients, setClients] = useState([]);\n  const [clientId, setClientId] = useState('');\n  const [flag, setflag] = useState(false);\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n    if (clientId) {\n      socket.emit(\n        'chat specific client',\n        clientId,\n        socket.id,\n        inputRef.current.value\n      );\n      inputRef.current.value = '';\n    }\n  };\n\n  useEffect(() => {\n    socket.on('bring clients list', (clientIds) => {\n      const clietsWithoutMe = clientIds.filter(\n        (client) => client !== socket.id\n      );\n      setClients(clietsWithoutMe);\n    });\n    socket.on('connect specific client', (socketId) => {\n      setClientId(socketId);\n      setflag(true);\n    });\n    socket.on('chat specific client message', function (msg) {\n      setMessages((prev) => [...prev, msg]);\n    });\n    socket.on('group chat message', function (msg) {\n      setMessages((prev) => [...prev, msg]);\n    });\n    socket.on('group chat clients', function (msg) {\n      setClients((prev) => [...prev, msg]);\n    });\n  }, []);\n\n  const handleClickClient = (clientId) => {\n    setClientId(clientId);\n    socket.emit('connect specific client', clientId, socket.id);\n    setflag(true);\n  };\n\n  return (\n    <div>\n      <div className=\"header\">\n        <h2>WhatsApp Web</h2>\n        {flag ? (\n          <h3 style={{ color: 'blue' }}>User Selected {clientId}</h3>\n        ) : (\n          <h3 style={{ color: 'red' }}>Select User</h3>\n        )}\n        <h3>List of Users</h3>\n\n        <ul ref={messagesRef} id=\"messages\">\n          {clients.map((client) => (\n            <li key={Math.ceil(Math.random() * 10000)}>\n              <button onClick={() => handleClickClient(client)}>\n                {client}\n              </button>\n            </li>\n          ))}\n        </ul>\n      </div>\n      <div className=\"message-container\">\n        <ul ref={messagesRef} id=\"messages\">\n          {messages.map((message) => (\n            <li key={Math.ceil(Math.random() * 10000)}>{message}</li>\n          ))}\n        </ul>\n        <form id=\"form\" onSubmit={submitHandler}>\n          <input\n            placeholder=\"Enter your message\"\n            id=\"input\"\n            ref={inputRef}\n            required\n          />\n          <button>Send</button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default WS;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}